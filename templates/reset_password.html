{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header text-center">
          <h2>パスワードリセット</h2>
        </div>
        <div class="card-body">
          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %} {% for category, message in messages %}
          <div
            class="alert alert-{{ category }} alert-dismissible fade show"
            role="alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %} {% endif %} {% endwith %}

          <form
            method="POST"
            action="{{ url_for('reset_password') }}"
            class="needs-validation"
            novalidate
          >
            <div class="mb-3">
              <label for="email" class="form-label">メールアドレス</label>
              <div class="input-group">
                <span class="input-group-text">
                  <i class="bi bi-envelope"></i>
                </span>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                  autocomplete="email"
                />
                <div class="invalid-feedback">
                  メールアドレスを入力してください
                </div>
              </div>
            </div>
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-envelope me-2"></i>リセット手順を送信
              </button>
            </div>
          </form>
          <div class="text-center mt-3">
            <a href="{{ url_for('login') }}" class="text-secondary">
              <i class="bi bi-arrow-left me-1"></i>ログインに戻る
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    border: none;
  }

  .card-header {
    background-color: #f8f9fa;
    border-bottom: none;
    padding: 1.5rem;
  }

  .card-body {
    padding: 2rem;
  }

  .btn-primary {
    background-color: #4caf50;
    border-color: #4caf50;
  }

  .btn-primary:hover {
    background-color: #45a049;
    border-color: #45a049;
  }

  a {
    color: #4caf50;
    text-decoration: none;
  }

  a:hover {
    color: #45a049;
    text-decoration: underline;
  }

  .text-secondary {
    color: #6c757d !important;
  }

  .text-secondary:hover {
    color: #4caf50 !important;
  }

  .input-group-text {
    background-color: #f8f9fa;
    border-right: none;
  }

  .input-group .form-control {
    border-left: none;
  }

  .input-group .form-control:focus {
    border-left: none;
    box-shadow: none;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Bootstrap バリデーション
    const forms = document.querySelectorAll(".needs-validation");
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  });
</script>
{% endblock %}
